{"version":3,"sources":["script.js","ajax.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ajax.js","sourcesContent":["/******* Application Initiation: setting all handlers *******/\r\nfunction setEventHandlers() {\t\r\n\r\n\tAjax.setEventHandlers();\r\n\t\r\n}\r\n\r\n$(\"document\").ready(function() {\t\r\n\tsetEventHandlers();\r\n});","/********************** Module Ajax: Tasks Index Page ********************/\r\n\r\nvar Ajax = (function() {\r\n\r\n    var url = \"/tasks\";\r\n\t\r\n\treturn {\r\n\t\t\r\n\t\t// Set Ajax Module event handlers\r\n\t\tsetEventHandlers: function () {\t\r\n\r\n\t\t\t//display modal form for task editing\r\n\t\t\t$('.open-modal').click(function(){\r\n\t\t\t\tvar task_id = $(this).val();\r\n\r\n\t\t\t\t$.get(url + '/' + task_id, function (data) {\r\n\t\t\t\t\t//success data\r\n\t\t\t\t\tconsole.log(data);\r\n\t\t\t\t\t$('#task_id').val(data.id);\r\n\t\t\t\t\t$('#task').val(data.title);\r\n\t\t\t\t\t$('#description').val(data.description);\r\n\t\t\t\t\t$('#btn-save').val(\"update\");\r\n\r\n\t\t\t\t\t$('#myModal').modal('show');\r\n\t\t\t\t}) \r\n\t\t\t});\r\n\r\n\t\t\t//display modal form for creating new task\r\n\t\t\t$('#btn-add').click(function(){\r\n\t\t\t\t$('#btn-save').val(\"add\");\r\n\t\t\t\t$('#frmTasks').trigger(\"reset\");\r\n\t\t\t\t$('#myModal').modal('show');\r\n\t\t\t});\r\n\r\n\t\t\t//delete task and remove it from list\r\n\t\t\t$('.delete-task').click(function(){\r\n\t\t\t\tvar task_id = $(this).val();\r\n\t\t\t\t\r\n\t\t\t\t$.ajaxSetup({\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t'X-CSRF-TOKEN': $('meta[name=\"_token\"]').attr('content')\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\r\n\t\t\t\t$.ajax({\r\n\r\n\t\t\t\t\ttype: \"DELETE\",\r\n\t\t\t\t\turl: url + '/' + task_id,\r\n\t\t\t\t\tsuccess: function (data) {\r\n\t\t\t\t\t\tconsole.log(data);\r\n\r\n\t\t\t\t\t\t$(\"#task\" + task_id).remove();\r\n\t\t\t\t\t},\r\n\t\t\t\t\terror: function (data) {\r\n\t\t\t\t\t\tconsole.log('Error:', data);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\r\n\t\t\t//create new task / update existing task\r\n\t\t\t$(\"#btn-save\").click(function (e) {\r\n\t\t\t\t$.ajaxSetup({\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t'X-CSRF-TOKEN': $('meta[name=\"_token\"]').attr('content')\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\r\n\t\t\t\te.preventDefault(); \r\n\r\n\t\t\t\tvar formData = {\r\n\t\t\t\t\ttitle: $('#task').val(),\r\n\t\t\t\t\tdescription: $('#description').val(),\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//used to determine the http verb to use [add=POST], [update=PUT]\r\n\t\t\t\tvar state = $('#btn-save').val();\r\n\r\n\t\t\t\tvar type = \"POST\"; //for creating new resource\r\n\t\t\t\tvar task_id = $('#task_id').val();;\r\n\t\t\t\tvar my_url = url;\r\n\r\n\t\t\t\tif (state == \"update\"){\r\n\t\t\t\t\ttype = \"PUT\"; //for updating existing resource\r\n\t\t\t\t\tmy_url += '/' + task_id;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconsole.log(formData);\r\n\r\n\t\t\t\t$.ajax({\r\n\r\n\t\t\t\t\ttype: type,\r\n\t\t\t\t\turl: my_url,\r\n\t\t\t\t\tdata: formData,\r\n\t\t\t\t\tdataType: 'json',\r\n\t\t\t\t\tsuccess: function (data) {\r\n\t\t\t\t\t\tconsole.log(data);\r\n\r\n\t\t\t\t\t\tvar task = '<tr id=\"task' + data.id + '\"><td>' + data.id + '</td><td>' + data.title + '</td><td>' + data.description + '</td><td>' + data.created_at + '</td>';\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\ttask += '<td><button class=\"btn btn-warning btn-xs btn-detail open-modal\" value=\"' + data.id + '\">Edit</button></td>';\r\n\t\t\t\t\t\ttask += '<td><button class=\"btn btn-danger btn-xs btn-delete delete-task\" value=\"' + data.id + '\">Delete</button></td></tr>';\r\n\r\n\t\t\t\t\t\tif (state == \"add\"){ //if user added a new record\r\n\t\t\t\t\t\t\t$('#tasks-list').append(task);\r\n\t\t\t\t\t\t}else{ //if user updated an existing record\r\n\r\n\t\t\t\t\t\t\t$(\"#task\" + task_id).replaceWith( task );\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t$('#frmTasks').trigger(\"reset\");\r\n\r\n\t\t\t\t\t\t$('#myModal').modal('hide')\r\n\t\t\t\t\t},\r\n\t\t\t\t\terror: function (data) {\r\n\t\t\t\t\t\tconsole.log('Error:', data);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n}());"]}