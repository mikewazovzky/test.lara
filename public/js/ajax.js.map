{"version":3,"sources":["ajax.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ajax.js","sourcesContent":["$(document).ready(function(){\r\n\r\n    var url = \"/tasks\";\r\n\r\n    //display modal form for task editing\r\n    $('.open-modal').click(function(){\r\n        var task_id = $(this).val();\r\n\r\n        $.get(url + '/' + task_id, function (data) {\r\n            //success data\r\n            console.log(data);\r\n            $('#task_id').val(data.id);\r\n            $('#task').val(data.title);\r\n            $('#description').val(data.description);\r\n            $('#btn-save').val(\"update\");\r\n\r\n            $('#myModal').modal('show');\r\n        }) \r\n    });\r\n\r\n    //display modal form for creating new task\r\n    $('#btn-add').click(function(){\r\n        $('#btn-save').val(\"add\");\r\n        $('#frmTasks').trigger(\"reset\");\r\n        $('#myModal').modal('show');\r\n    });\r\n\r\n    //delete task and remove it from list\r\n    $('.delete-task').click(function(){\r\n        var task_id = $(this).val();\r\n\t\t\r\n\t\t$.ajaxSetup({\r\n            headers: {\r\n                'X-CSRF-TOKEN': $('meta[name=\"_token\"]').attr('content')\r\n            }\r\n        })\r\n\t\t\r\n\r\n        $.ajax({\r\n\r\n            type: \"DELETE\",\r\n            url: url + '/' + task_id,\r\n            success: function (data) {\r\n                console.log(data);\r\n\r\n                $(\"#task\" + task_id).remove();\r\n            },\r\n            error: function (data) {\r\n                console.log('Error:', data);\r\n            }\r\n        });\r\n    });\r\n\r\n    //create new task / update existing task\r\n    $(\"#btn-save\").click(function (e) {\r\n        $.ajaxSetup({\r\n            headers: {\r\n                'X-CSRF-TOKEN': $('meta[name=\"_token\"]').attr('content')\r\n            }\r\n        })\r\n\r\n        e.preventDefault(); \r\n\r\n        var formData = {\r\n            title: $('#task').val(),\r\n            description: $('#description').val(),\r\n        }\r\n\r\n        //used to determine the http verb to use [add=POST], [update=PUT]\r\n        var state = $('#btn-save').val();\r\n\r\n        var type = \"POST\"; //for creating new resource\r\n        var task_id = $('#task_id').val();;\r\n        var my_url = url;\r\n\r\n        if (state == \"update\"){\r\n            type = \"PUT\"; //for updating existing resource\r\n            my_url += '/' + task_id;\r\n        }\r\n\r\n        console.log(formData);\r\n\r\n        $.ajax({\r\n\r\n            type: type,\r\n            url: my_url,\r\n            data: formData,\r\n            dataType: 'json',\r\n            success: function (data) {\r\n                console.log(data);\r\n\r\n                var task = '<tr id=\"task' + data.id + '\"><td>' + data.id + '</td><td>' + data.title + '</td><td>' + data.description + '</td><td>' + data.created_at + '</td>';\r\n                \r\n\t\t\t\ttask += '<td><button class=\"btn btn-warning btn-xs btn-detail open-modal\" value=\"' + data.id + '\">Edit</button></td>';\r\n                task += '<td><button class=\"btn btn-danger btn-xs btn-delete delete-task\" value=\"' + data.id + '\">Delete</button></td></tr>';\r\n\r\n                if (state == \"add\"){ //if user added a new record\r\n                    $('#tasks-list').append(task);\r\n                }else{ //if user updated an existing record\r\n\r\n                    $(\"#task\" + task_id).replaceWith( task );\r\n                }\r\n\r\n                $('#frmTasks').trigger(\"reset\");\r\n\r\n                $('#myModal').modal('hide')\r\n            },\r\n            error: function (data) {\r\n                console.log('Error:', data);\r\n            }\r\n        });\r\n    });\r\n});"]}